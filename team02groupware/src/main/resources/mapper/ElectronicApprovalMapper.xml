<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.team02.groupware.mapper.ElectronicApprovalMapper"> 
 
 <!-- 양식함관리 페이지 내 문서양식 테이블 dto map -->
  <resultMap type="ElectronicApprovalDocument" id="eaDocumentFormResultMap">
  	<result property="dFormCode" column="d_form_code"/>
  	<result property="dSecurityLevel" column="d_security_level"/>
  	<result property="dFormTypeCode" column="d_form_type_code"/>
  	<result property="dApprovalFormatCode" column="d_approval_format_code"/>
  	<result property="dFormName" column="d_form_name"/>
  	<result property="dFormAbbreviation" column="d_form_abbreviation"/>
  	<result property="dFormDetailExplanation" column="d_form_detail_explanation"/>
  	<result property="dSecurityLevelChangeable" column="d_security_level_changeable"/>
  	<result property="dExpiryDate" column="d_expiry_date"/>
  	<result property="dExpiryDateChangeable" column="d_expiry_date_changeable"/>
  	<result property="dFormDetailContent" column="d_form_detail_content"/>
  	<result property="dFormType" column="d_form_type"/>
  </resultMap>
  
   <!-- 양식함관리 페이지 내 분류설정 테이블 dto map -->
  <resultMap type="ElectronicApprovalDocument" id="eaDocumentFormTypeResultMap">
	<result property="dFormType" column="d_form_type"/>
  </resultMap>
  
  <!-- 전자결재 기본설정 테이블 dto map -->
  <resultMap type="ElectronicApprovalDocument" id="eaDocumentSettingResultMap">
	<result property="dCompanyCodeUsage" column="d_company_code_usage"/>
	<result property="dAbbreviationUsage" column="d_abbreviation_usage"/>
	<result property="dUnitNameUsage" column="d_unit_name_usage"/>
	<result property="dRegisterTimeFormat" column="d_register_time_format"/>
	<result property="dSerialNumberFormat" column="d_serial_number_format"/>
	<result property="dExpiredDateDelete" column="d_expired_date_delete"/>
	<result property="dDecideFirstUsage" column="d_decide_first_usage"/>
	<result property="dDecideInsteadUsage" column="d_decide_instead_usage"/>
	<result property="dDecideAfterUsage" column="d_decide_after_usage"/>
	<result property="dReferTime" column="d_refer_time"/>
	<result property="dDraftCancelUsage" column="d_draft_cancel_usage"/>
	<result property="dEaRule" column="d_ea_rule"/>
  </resultMap>
  

  <!-- 양식함관리 페이지 내 문서양식 테이블 조회  -->
  <select id="selectEaDocumentForm" resultMap="eaDocumentFormResultMap">
  /* 문서양식 테이블 조회 쿼리문 실행 */  
	SELECT 
		*
	FROM 
		ea_document_form AS edf INNER JOIN ea_document_form_type AS edft 
		
		ON edf.d_form_type_code = edft.d_form_type_code
  </select>
  
  <!-- 양식함관리 페이지 내 분류설정 테이블 조회  -->
  <select id="selectEaDocumentFormType" resultMap="eaDocumentFormTypeResultMap">
  /* 문서양식 분류설정 테이블 조회 쿼리문 실행 */  
	SELECT 
		d_form_type
	FROM 
		ea_document_form_type;
  </select>
  
  <!-- 전자결재 기본설정 테이블 조회  -->
  <select id="selectEaDocumentSetting" resultMap="eaDocumentSettingResultMap">
  /* 전자결재 기본설정 테이블 조회 쿼리문 실행 */  
	SELECT 
		*
	FROM 
		ea_document_setting;
  </select>
  
  <!-- 전자결재 사내 전자결재 규정 UPDATE  -->
  <update id="updateEaRule" parameterType="String">
  /* 전자결재 사내 전자결재 규정 UPDATE 쿼리문 실행 */  
	UPDATE 
		ea_document_setting 
	SET
		d_ea_rule=#{eaRuleVal};

  </update>
  </mapper>